!function(e){function t(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var o={};t.m=e,t.c=o,t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=angular.module("socialLogin",[]);n.provider("social",function(){var e,t,o,n;return{setFbKey:function(o){e=o.appId,t=o.apiVersion;var n,i=document,r=i.getElementsByTagName("script")[0];n=i.createElement("script"),n.id="facebook-jssdk",n.async=!0,n.src="//connect.facebook.net/en_US/sdk.js",n.onload=function(){FB.init({appId:e,status:!0,cookie:!0,xfbml:!0,version:t})},r.parentNode.insertBefore(n,r)},setGoogleKey:function(e){o=e;var t,n=document,i=n.getElementsByTagName("script")[0];t=n.createElement("script"),t.async=!0,t.src="//apis.google.com/js/platform.js",t.onload=function(){var t={client_id:e,scope:"email"};gapi.load("auth2",function(){gapi.auth2.init(t)})},i.parentNode.insertBefore(t,i)},setLinkedInKey:function(e){n=e;var t,o=document,i=o.getElementsByTagName("script")[0];t=o.createElement("script"),t.async=!1,t.src="//platform.linkedin.com/in.js",t.text=("api_key: "+n).replace('"',""),i.parentNode.insertBefore(t,i)},$get:function(){return{fbKey:e,googleKey:o,linkedInKey:n,fbApiV:t}}}}),n.factory("socialLoginService",["$window","$rootScope",function(e,t){return{logout:function(){switch(e.localStorage.getItem("_login_provider")){case"google":var o=document.getElementById("gSignout");void 0!==o&&null!=o&&o.remove();var n,i=document,r=i.getElementsByTagName("script")[0];n=i.createElement("script"),n.src="https://accounts.google.com/Logout",n.type="text/html",n.id="gSignout",e.localStorage.removeItem("_login_provider"),t.$broadcast("event:social-sign-out-success","success"),r.parentNode.insertBefore(n,r);break;case"linkedIn":IN.User.logout(function(){e.localStorage.removeItem("_login_provider"),t.$broadcast("event:social-sign-out-success","success")},{});break;case"facebook":FB.logout(function(o){e.localStorage.removeItem("_login_provider"),t.$broadcast("event:social-sign-out-success","success")})}},setProvider:function(t){e.localStorage.setItem("_login_provider",t)}}}]),n.directive("linkedIn",["$rootScope","social","socialLoginService","$window",function(e,t,o,n){return{restrict:"EA",scope:{},link:function(t,n,i){n.on("click",function(){IN.User.authorize(function(){IN.API.Raw("/people/~:(id,first-name,last-name,email-address,picture-url)").result(function(t){o.setProvider("linkedIn");var n={name:t.firstName+" "+t.lastName,email:t.emailAddress,uid:t.id,provider:"linkedIN",imageUrl:t.pictureUrl};e.$broadcast("event:social-sign-in-success",n)})})})}}}]),n.directive("gLogin",["$rootScope","social","socialLoginService",function(e,t,o){return{restrict:"EA",scope:{},replace:!0,link:function(t,n,i){n.on("click",function(){var n=function(){var e=t.gauth.currentUser.get(),o=e.getBasicProfile(),n=e.getAuthResponse().id_token;return{token:e.getAuthResponse().access_token,idToken:n,name:o.getName(),email:o.getEmail(),uid:o.getId(),provider:"google",imageUrl:o.getImageUrl()}};void 0===t.gauth&&(t.gauth=gapi.auth2.getAuthInstance()),t.gauth.isSignedIn.get()?(o.setProvider("google"),e.$broadcast("event:social-sign-in-success",n())):t.gauth.signIn().then(function(t){o.setProvider("google"),e.$broadcast("event:social-sign-in-success",n())},function(e){console.log(e)})})}}}]),n.directive("fbLogin",["$rootScope","social","socialLoginService","$q",function(e,t,o,n){return{restrict:"EA",scope:{},replace:!0,link:function(t,i,r){i.on("click",function(){var t=function(){var e=n.defer();return FB.api("/me?fields=name,email,picture",function(t){!t||t.error?e.reject("Error occured while fetching user details."):e.resolve({name:t.name,email:t.email,uid:t.id,provider:"facebook",imageUrl:t.picture.data.url})}),e.promise};FB.getLoginStatus(function(n){"connected"===n.status?t().then(function(t){t.token=n.authResponse.accessToken,o.setProvider("facebook"),e.$broadcast("event:social-sign-in-success",t)}):FB.login(function(n){"connected"===n.status&&t().then(function(t){t.token=n.authResponse.accessToken,o.setProvider("facebook"),e.$broadcast("event:social-sign-in-success",t)})},{scope:"email",auth_type:"rerequest"})})})}}}]),t.default=n}]);